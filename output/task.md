# タスク一覧

## 環境準備とプロジェクトセットアップ

- [ ] **Vite + React プロジェクトの作成**
  - **目的**: 開発環境の基盤を構築する
  - **完了条件**: `emojilink` ディレクトリが作成され、React プロジェクトの初期ファイルが存在する
  - **コマンド**: `npm create vite@latest emojilink -- --template react`

- [ ] **依存関係のインストール**
  - **目的**: React とその関連ライブラリをインストールする
  - **完了条件**: `node_modules` ディレクトリが作成され、`package-lock.json` が生成される
  - **コマンド**: `cd emojilink && npm install`

- [ ] **絵文字ピッカーライブラリのインストール**
  - **目的**: 絵文字選択機能を実装するためのライブラリを追加する
  - **完了条件**: `package.json` に `emoji-picker-react` が追加される
  - **コマンド**: `npm install emoji-picker-react`

- [ ] **開発サーバーの起動確認**
  - **目的**: 開発環境が正常に動作することを確認する
  - **完了条件**: `npm run dev` 実行後、ブラウザで `http://localhost:5173` にアクセスして Vite のデフォルト画面が表示される
  - **コマンド**: `npm run dev`

## データモデルとモックデータの準備

- [ ] **型定義ファイルの作成**
  - **目的**: 投稿、リアクション、ユーザーのデータ構造を定義する
  - **完了条件**: `src/types/index.ts` に `Post`, `Reaction`, `User` の interface が定義される
  - **ヒント**: `Post` には `id`, `emojis`, `userId`, `userName`, `userIcon`, `reactions`, `createdAt` を含める

- [ ] **データディレクトリの作成**
  - **目的**: モックデータを格納するディレクトリを準備する
  - **完了条件**: `src/data/` ディレクトリが作成される
  - **コマンド**: `mkdir src/data`

- [ ] **モックデータの作成**
  - **目的**: デモ用の初期投稿データを用意する
  - **完了条件**: `src/data/posts.json` に 3〜5件の投稿データが記述される
  - **ヒント**: 各投稿には絵文字 1〜3個、投稿者情報、リアクション情報を含める

- [ ] **ストレージユーティリティの作成**
  - **目的**: `localStorage` へのデータ保存・読み込み処理を共通化する
  - **完了条件**: `src/utils/storage.ts` に `savePosts`, `loadPosts`, `initializeData` 関数が実装される
  - **ヒント**: 初回アクセス時に `posts.json` から `localStorage` にデータをコピーする処理を含める

## 基本レイアウトとヘッダーの実装

- [ ] **Header コンポーネントの作成**
  - **目的**: アプリのヘッダー部分を実装する
  - **完了条件**: `src/components/Header.tsx` が作成され、タイトル、投稿ボタン、プロフィールアイコンが表示される
  - **ヒント**: flexbox で左揃えのタイトル「EmojiLink 🌐」と右揃えのボタン「＋」「👤」を配置

- [ ] **Header のスタイリング**
  - **目的**: ヘッダーの見た目を整える
  - **完了条件**: ヘッダーが画面上部に固定され、背景色やボーダーが適用される
  - **ヒント**: CSS で `position: sticky` や `border-bottom` を使用

- [ ] **投稿ボタンのクリックイベント準備**
  - **目的**: ヘッダーの「＋」ボタンからモーダルを開く準備をする
  - **完了条件**: `Header` コンポーネントに `onPostClick` prop が追加され、クリック時に親コンポーネントに通知される
  - **ヒント**: 後でモーダル表示ロジックを接続できるようにする

## タイムライン表示の実装

- [ ] **PostCard コンポーネントの作成**
  - **目的**: 個々の投稿をカード形式で表示する
  - **完了条件**: `src/components/PostCard.tsx` が作成され、投稿者アイコン、ユーザー名、絵文字、投稿日時が表示される
  - **ヒント**: props として `Post` 型のデータを受け取る

- [ ] **PostCard のスタイリング**
  - **目的**: 投稿カードの見た目を整える
  - **完了条件**: カードに影やボーダー、余白が適用され、絵文字が大きく表示される
  - **ヒント**: 絵文字は `font-size: 3rem` 程度で表示

- [ ] **リアクションエリアのプレースホルダー追加**
  - **目的**: 後でリアクションボタンを配置する場所を確保する
  - **完了条件**: `PostCard` にリアクション表示用の `<div>` が追加される
  - **ヒント**: 現時点では空の div でOK

- [ ] **Timeline コンポーネントの作成**
  - **目的**: 投稿一覧を時系列で表示する
  - **完了条件**: `src/components/Timeline.tsx` が作成され、`PostCard` を複数表示できる
  - **ヒント**: `useState` で投稿データを管理し、`map` で `PostCard` をレンダリング

- [ ] **localStorage からデータを読み込み**
  - **目的**: 保存された投稿データをタイムラインに表示する
  - **完了条件**: `Timeline` コンポーネントが `useEffect` で `loadPosts` を呼び出し、state にデータを格納する
  - **ヒント**: 初回レンダリング時に `initializeData` を呼び出す

- [ ] **投稿を時系列で並べ替え**
  - **目的**: 新しい投稿が上に表示されるようにする
  - **完了条件**: 投稿データが `createdAt` で降順ソートされる
  - **ヒント**: `sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))`

- [ ] **空状態の表示対応**
  - **目的**: 投稿が0件の時にメッセージを表示する
  - **完了条件**: 投稿がない場合に「まだ投稿がありません 🎉 最初の投稿をしてみよう！」が表示される
  - **ヒント**: `posts.length === 0` で条件分岐

## 投稿モーダルの実装

- [ ] **PostModal コンポーネントの作成**
  - **目的**: 絵文字を選択して投稿するモーダルを実装する
  - **完了条件**: `src/components/PostModal.tsx` が作成され、モーダルの開閉ができる
  - **ヒント**: `isOpen` prop でモーダルの表示/非表示を制御

- [ ] **絵文字ピッカーの組み込み**
  - **目的**: `emoji-picker-react` を使って絵文字を選択できるようにする
  - **完了条件**: モーダル内に絵文字ピッカーが表示され、クリックで絵文字を選択できる
  - **ヒント**: `<EmojiPicker onEmojiClick={handleEmojiClick} />` を使用

- [ ] **選択済み絵文字のプレビュー表示**
  - **目的**: 選択した絵文字をユーザーに確認させる
  - **完了条件**: モーダル内に選択済み絵文字（最大3個）が大きく表示される
  - **ヒント**: `useState` で選択済み絵文字の配列を管理

- [ ] **絵文字の削除機能**
  - **目的**: 選択した絵文字を取り消せるようにする
  - **完了条件**: 各絵文字の横に「×」ボタンが表示され、クリックで削除できる
  - **ヒント**: `filter` で配列から該当絵文字を削除

- [ ] **バリデーションの実装**
  - **目的**: 絵文字が0個または4個以上の時にエラーを表示する
  - **完了条件**: 条件に合わない時に「絵文字は1〜3個選択してください」とエラーメッセージが表示される
  - **ヒント**: `emojis.length < 1 || emojis.length > 3` で判定

- [ ] **投稿ボタンの有効/無効切り替え**
  - **目的**: バリデーションエラー時に投稿できないようにする
  - **完了条件**: エラー時に「投稿する 🚀」ボタンが無効化される
  - **ヒント**: `disabled={emojis.length < 1 || emojis.length > 3}`

- [ ] **新規投稿の作成処理**
  - **目的**: 投稿ボタンクリック時に新しい投稿を作成する
  - **完了条件**: クリック時に `Post` 型のオブジェクトが生成され、state に追加される
  - **ヒント**: `id` は `Date.now()` で生成、`reactions` は空配列で初期化

- [ ] **localStorage へのデータ保存**
  - **目的**: 新規投稿を永続化する
  - **完了条件**: 投稿後に `savePosts` が呼ばれ、`localStorage` にデータが保存される
  - **ヒント**: `savePosts` は `storage.ts` で定義済み

- [ ] **モーダルのリセットと閉じる処理**
  - **目的**: 投稿後にモーダルを初期状態に戻す
  - **完了条件**: 投稿成功後、選択済み絵文字がクリアされ、モーダルが閉じる
  - **ヒント**: `setEmojis([])` と `onClose()` を実行

## リアクション機能の実装

- [ ] **ReactionButton コンポーネントの作成**
  - **目的**: リアクションボタンを実装する
  - **完了条件**: `src/components/ReactionButton.tsx` が作成され、絵文字とカウントが表示される
  - **ヒント**: props として `emoji`, `count`, `onClick` を受け取る

- [ ] **5種類のリアクションボタンを配置**
  - **目的**: 各投稿に固定の5種類のリアクションを表示する
  - **完了条件**: `PostCard` に 👍 ❤️ 😂 😮 🎉 のボタンが横並びで表示される
  - **ヒント**: リアクションの配列をループして `ReactionButton` をレンダリング

- [ ] **リアクション追加処理の実装**
  - **目的**: ボタンクリック時にリアクション数を増やす
  - **完了条件**: クリックで該当投稿の該当リアクションの `count` が +1 される
  - **ヒント**: `map` で投稿を探し、該当リアクションの `count` を更新

- [ ] **リアクション削除処理の実装**
  - **目的**: 既にリアクション済みの場合は取り消す
  - **完了条件**: 再度クリックするとカウントが -1 される（0未満にはならない）
  - **ヒント**: `count > 0` の時のみ減算

- [ ] **リアクション状態の localStorage 保存**
  - **目的**: リアクション変更を永続化する
  - **完了条件**: リアクション更新後に `savePosts` が呼ばれる
  - **ヒント**: state 更新後に `useEffect` で保存

- [ ] **リアクションボタンのアニメーション追加**
  - **目的**: クリック時に視覚的なフィードバックを与える
  - **完了条件**: クリック時にボタンが拡大→縮小するアニメーションが再生される
  - **ヒント**: CSS の `@keyframes` と `animation` プロパティを使用

## トースト通知の実装

- [ ] **Toast コンポーネントの作成**
  - **目的**: 投稿成功時のメッセージを表示する
  - **完了条件**: `src/components/Toast.tsx` が作成され、メッセージを表示できる
  - **ヒント**: props として `message`, `isVisible` を受け取る

- [ ] **Toast のスタイリング**
  - **目的**: トーストを画面上部に固定表示する
  - **完了条件**: トーストが画面上部中央に表示され、背景色と影が適用される
  - **ヒント**: `position: fixed; top: 20px; left: 50%; transform: translateX(-50%);`

- [ ] **トースト表示ロジックの実装**
  - **目的**: 投稿成功時にトーストを自動表示・非表示する
  - **完了条件**: 投稿後に「投稿しました！✨」が2秒間表示され、その後消える
  - **ヒント**: `useState` で表示状態を管理し、`setTimeout` で2秒後に非表示

- [ ] **トーストを App コンポーネントに統合**
  - **目的**: トースト通知をアプリ全体で使えるようにする
  - **完了条件**: `App.tsx` に `Toast` コンポーネントが追加され、投稿時に表示される
  - **ヒント**: 投稿成功時に `setToastVisible(true)` を呼び出す

## スタイリングと UI 調整

- [ ] **配色の統一**
  - **目的**: アプリ全体の見た目に一貫性を持たせる
  - **完了条件**: 背景色、ボタン色、テキスト色が統一される
  - **ヒント**: CSS 変数で色を定義し、各コンポーネントで使用

- [ ] **投稿カードのホバー効果**
  - **目的**: カードにマウスを乗せた時の反応を追加する
  - **完了条件**: ホバー時にカードの影が濃くなるか、背景色が変わる
  - **ヒント**: CSS の `:hover` で `box-shadow` を変更

- [ ] **ボタンのホバー・アクティブ効果**
  - **目的**: ボタン操作のフィードバックを向上させる
  - **完了条件**: ボタンホバー時に色が変わり、クリック時に押し込まれる見た目になる
  - **ヒント**: `:hover` と `:active` で `background-color` と `transform: scale()` を変更

- [ ] **絵文字表示サイズの調整**
  - **目的**: 投稿絵文字とリアクション絵文字のサイズを調整する
  - **完了条件**: 投稿絵文字が大きく（3rem）、リアクション絵文字が小さく（1.2rem）表示される
  - **ヒント**: 各コンポーネントの CSS で `font-size` を指定

- [ ] **レスポンシブ対応の確認**
  - **目的**: スマホとPC画面で正しく表示されることを確認する
  - **完了条件**: ブラウザの幅を変えても、レイアウトが崩れずに表示される
  - **ヒント**: `max-width` や `@media` クエリで調整（時間があれば）

## 結合テストとデバッグ

- [ ] **投稿機能の動作確認**
  - **目的**: 絵文字投稿が正常に動作することを確認する
  - **完了条件**: モーダルから1〜3個の絵文字を選択して投稿でき、タイムラインに表示される
  - **ヒント**: 0個、4個以上の場合はエラーが表示されることも確認

- [ ] **バリデーションの動作確認**
  - **目的**: 入力エラー時の挙動を確認する
  - **完了条件**: 絵文字0個または4個以上の時に投稿ボタンが無効化され、エラーメッセージが表示される
  - **ヒント**: 実際にいろいろなパターンで試す

- [ ] **タイムライン更新の確認**
  - **目的**: 新規投稿がタイムライン先頭に追加されることを確認する
  - **完了条件**: 投稿後、即座にタイムラインの一番上に新しい投稿が表示される
  - **ヒント**: 複数回投稿して順序を確認

- [ ] **リアクション機能の動作確認**
  - **目的**: 5種類すべてのリアクションが正常に動作することを確認する
  - **完了条件**: 各リアクションボタンをクリックして数が増減し、アニメーションが再生される
  - **ヒント**: 0の状態からクリックして増え、再クリックで減ることを確認

- [ ] **トースト通知の表示確認**
  - **目的**: 投稿成功時にトーストが表示されることを確認する
  - **完了条件**: 投稿後に「投稿しました！✨」が2秒間表示され、自動で消える
  - **ヒント**: 複数回投稿してトーストが正しく動作するか確認

- [ ] **localStorage の永続化確認**
  - **目的**: データがブラウザに保存され、リロード後も残ることを確認する
  - **完了条件**: 投稿やリアクションを追加後、ページをリロードしてもデータが残っている
  - **ヒント**: ブラウザの開発者ツールで `localStorage` の中身も確認

- [ ] **複数ブラウザでの表示確認**
  - **目的**: 異なるブラウザでも正常に動作することを確認する
  - **完了条件**: Chrome, Edge, Safari で動作確認が完了する
  - **ヒント**: 可能な範囲で確認（最低限Chromeで動作すればOK）

## デモデータ投入と最終確認

- [ ] **手動で複数の投稿を追加**
  - **目的**: デモ用の投稿データを充実させる
  - **完了条件**: 5〜10件の投稿がタイムラインに表示される
  - **ヒント**: 投稿モーダルから手動で追加、または開発者ツールで `localStorage` に直接書き込み

- [ ] **各投稿にリアクションを追加**
  - **目的**: タイムラインをにぎやかにする
  - **完了条件**: 各投稿に複数種類のリアクションが付けられている
  - **ヒント**: 各投稿のリアクションボタンを複数回クリック

- [ ] **デモ操作手順の確認**
  - **目的**: 体験授業での操作を事前にリハーサルする
  - **完了条件**: 「投稿 → リアクション → トースト表示」の流れが問題なく実行できる
  - **ヒント**: 高校生に見せるつもりで一通り操作してみる

- [ ] **スクリーンショット取得**
  - **目的**: デモ用の資料や記録を残す
  - **完了条件**: タイムライン画面、投稿モーダル、リアクション追加の各場面のスクリーンショットが取得される
  - **ヒント**: 後で説明資料に使える

- [ ] **最終動作確認**
  - **目的**: すべての機能が正常に動作することを総合的に確認する
  - **完了条件**: 全機能が問題なく動作し、エラーが発生しない
  - **ヒント**: 一通りの操作を再度実行し、不具合がないか確認

# 注意・チェック

## 実行順序のメモ
- 必ず上から順に実行すること（依存関係があります）
- 各ステップが完了したらチェックボックスをONにして進捗を管理する
- エラーが発生した場合は、前のステップに戻って確認する

## 時間が足りない場合に飛ばせるタスク
1. **レスポンシブ対応の確認**（スタイリング部分）
2. **複数ブラウザでの表示確認**（Chrome のみでOK）
3. **リアクションボタンのアニメーション追加**（視覚効果は後回しでも機能は動く）
4. **配色の統一**（デフォルトのスタイルでも動作には問題なし）
5. **スクリーンショット取得**（記録用なので必須ではない）

## 重要なポイント
- **localStorage の初期化**: 初回アクセス時に必ず `initializeData` を実行する
- **バリデーション**: 投稿時の絵文字数チェックは必ず実装する
- **データの永続化**: 投稿・リアクション後は必ず `savePosts` を呼び出す
- **時系列表示**: 投稿は必ず `createdAt` で降順ソートする

## トラブルシューティング
- 開発サーバーが起動しない → `npm install` を再実行
- 絵文字が表示されない → ブラウザのコンソールでエラーを確認
- データが消える → `localStorage` が有効か確認（プライベートブラウザモードは避ける）
- モーダルが開かない → `isOpen` state が正しく更新されているか確認
